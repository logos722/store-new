@import '@/styles/variables.scss';

/* ========================================
   ROOT LAYOUT - КРИТИЧЕСКИЕ СТИЛИ
   ======================================== */

/**
 * ⚡ ПРОИЗВОДИТЕЛЬНОСТЬ:
 * 
 * Эти стили применяются ко всему приложению, поэтому оптимизация
 * здесь критична для общей производительности.
 * 
 * - Минимизация использования дорогих свойств (box-shadow, filter)
 * - Изоляция layout через contain
 * - Оптимизация прокрутки через scroll-behavior
 */

// Skip link для доступности (WCAG 2.1)
.skipLink {
  position: absolute;
  top: -40px;
  left: 6px;
  background: $primary-color;
  color: white;
  padding: 8px;
  text-decoration: none;
  border-radius: 0 0 4px 4px;
  z-index: 10000;
  font-size: 14px;
  font-weight: 500;

  // Плавная анимация появления
  transition: top 0.2s ease-out;

  &:focus {
    top: 0;
    outline: 2px solid white;
    outline-offset: 2px;
  }
}

.body {
  /* ========================================
     ОПТИМИЗАЦИЯ РЕНДЕРИНГА ТЕКСТА
     ======================================== */

  // Антиалиасинг шрифтов для четкости
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  // Оптимизация рендеринга текста
  // ВНИМАНИЕ: optimizeLegibility может замедлить рендеринг больших текстов
  // Используем только на заголовках через отдельный класс при необходимости
  text-rendering: optimizeSpeed; // Быстрее чем optimizeLegibility

  /* ========================================
     ОПТИМИЗАЦИЯ ПРОКРУТКИ
     ======================================== */

  // Плавная прокрутка (можно отключить для пользователей с prefers-reduced-motion)
  scroll-behavior: smooth;

  // Оптимизация прокрутки на мобильных (iOS)
  -webkit-overflow-scrolling: touch;
}

.layout {
  display: flex;
  flex-direction: column;
  min-height: 100vh;

  // Изоляция layout для оптимизации перерисовок
  contain: layout;
}

.main {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 20px;

  // Изоляция layout и paint для оптимизации производительности
  // Предотвращает reflow/repaint родительских элементов
  contain: layout paint;

  /* ========================================
     АДАПТИВНЫЕ ОТСТУПЫ
     ======================================== */

  // Отступ снизу для мобильной навигации
  @media (max-width: 767px) {
    padding-bottom: 80px; // 60px высота навигации + 20px отступ
  }
}

/* ========================================
   ОПТИМИЗАЦИЯ ДЛЯ ПОЛЬЗОВАТЕЛЕЙ С ОГРАНИЧЕНИЯМИ
   ======================================== */

// Отключаем анимации для пользователей, предпочитающих уменьшенное движение
@media (prefers-reduced-motion: reduce) {
  .body {
    scroll-behavior: auto;
  }

  .skipLink {
    transition: none;
  }
}
