# YandexMap Component

Компонент для интеграции Яндекс.Карт в приложение Next.js.

## Особенности

- ✅ Простая интеграция без дополнительных библиотек
- ✅ Адаптивный дизайн для всех устройств
- ✅ Обработка ошибок загрузки
- ✅ Lazy loading API для оптимизации производительности
- ✅ Полная поддержка SSR Next.js
- ✅ Доступность (ARIA attributes)
- ✅ TypeScript типизация

## Использование

### Базовый пример

```tsx
import YandexMap from '@/shared/components/yandexMap/YandexMap';

function LocationPage() {
  return (
    <YandexMap
      center={[45.03547, 38.975313]}
      address="г. Краснодар, ул. Уральская, 83, 1а"
      organizationName="Гелион"
      zoom={16}
    />
  );
}
```

### Все доступные пропсы

```tsx
interface YandexMapProps {
  /** Координаты центра карты [широта, долгота] */
  center?: [number, number];

  /** Уровень зуммирования (0-19) */
  zoom?: number;

  /** Адрес для отображения на метке */
  address?: string;

  /** Название организации для метки */
  organizationName?: string;

  /** Высота карты */
  height?: string;

  /** API ключ Яндекс.Карт (опционально) */
  apiKey?: string;
}
```

### Значения по умолчанию

```tsx
{
  center: [45.03547, 38.975313],  // Краснодар, ул. Уральская, 83
  zoom: 16,
  address: 'г. Краснодар, ул. Уральская, 83, 1а',
  organizationName: 'Гелион',
  height: '400px'
}
```

## Как получить координаты

### Вариант 1: Яндекс.Карты

1. Откройте [Яндекс.Карты](https://yandex.ru/maps/)
2. Найдите нужный адрес
3. Кликните правой кнопкой мыши на точку
4. Выберите "Что здесь?"
5. Скопируйте координаты в формате `[широта, долгота]`

### Вариант 2: Google Maps

1. Откройте [Google Maps](https://www.google.com/maps)
2. Кликните на нужную точку
3. Координаты появятся внизу экрана
4. Формат: `широта, долгота`

## API ключ (опционально)

Для использования без ограничений рекомендуется получить бесплатный API ключ:

1. Зарегистрируйтесь на [Developer Яндекс.Карт](https://developer.tech.yandex.ru/)
2. Создайте новый ключ API
3. Добавьте ключ в переменные окружения:

```env
NEXT_PUBLIC_YANDEX_MAPS_API_KEY=your_api_key_here
```

4. Используйте в компоненте:

```tsx
<YandexMap
  apiKey={process.env.NEXT_PUBLIC_YANDEX_MAPS_API_KEY}
  // другие пропсы...
/>
```

## Адаптивность

Компонент автоматически адаптируется под разные размеры экранов:

- **Desktop**: полная функциональность, высота 400px
- **Tablet**: адаптированные контролы, высота 350px
- **Mobile**: упрощенный интерфейс, высота 250px
- **Small Mobile**: минимальная высота 200px

## Производительность

### Оптимизации

- ✅ Динамическая загрузка API только при необходимости
- ✅ Проверка на существующие скрипты (избежание дублирования)
- ✅ Отключение scroll zoom на мобильных устройствах
- ✅ Очистка ресурсов при размонтировании
- ✅ Минимальный набор контролов карты

### Рекомендации

1. Используйте компонент только на страницах, где он действительно нужен
2. Не размещайте несколько карт на одной странице без необходимости
3. Рассмотрите возможность lazy loading страницы с картой

## Обработка ошибок

Компонент автоматически обрабатывает ошибки:

- Ошибка загрузки API
- Ошибка инициализации карты
- Проблемы с сетью

При ошибке отображается fallback с кнопкой "Открыть в Яндекс.Картах".

## Доступность

- ✅ ARIA labels для скринридеров
- ✅ Семантический HTML
- ✅ Keyboard navigation
- ✅ Focus indicators

## Примеры использования

### В InfoPageLayout

```tsx
<InfoPageLayout
  title="Где нас найти"
  sections={sections}
  includeMap={true}
  mapCenter={[45.03547, 38.975313]}
  mapAddress="г. Краснодар, ул. Уральская, 83, 1а"
  mapOrganizationName="Гелион"
  mapZoom={16}
/>
```

### Кастомная высота

```tsx
<YandexMap
  height="600px"
  // другие пропсы...
/>
```

### С API ключом

```tsx
<YandexMap
  apiKey="your_api_key"
  center={[55.751244, 37.618423]}
  address="Москва, Красная площадь, 1"
  organizationName="Кремль"
  zoom={15}
/>
```

## Стилизация

Стили находятся в `YandexMap.module.scss`. Основные классы:

- `.mapWrapper` - контейнер карты
- `.mapContainer` - непосредственно карта
- `.mapLoading` - индикатор загрузки
- `.mapError` - сообщение об ошибке
- `.openMapButton` - кнопка открытия в Яндекс.Картах

### Кастомизация через CSS

```scss
// В вашем компоненте
.customMap {
  :global(.mapWrapper) {
    border-radius: 20px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  }
}
```

## Troubleshooting

### Карта не загружается

1. Проверьте консоль браузера на наличие ошибок
2. Убедитесь, что координаты в правильном формате `[lat, lng]`
3. Проверьте подключение к интернету
4. Попробуйте использовать API ключ

### Карта загружается медленно

1. Убедитесь, что скрипт загружается асинхронно
2. Проверьте скорость интернет-соединения
3. Рассмотрите использование CDN для статических ресурсов

### Координаты неверные

1. Проверьте порядок: `[широта, долгота]`, а не наоборот
2. Убедитесь, что координаты в десятичном формате
3. Используйте точку, а не запятую как разделитель

## Лицензия

Этот компонент использует Яндекс.Карты API. Убедитесь, что вы соблюдаете [условия использования Яндекс.Карт](https://yandex.ru/legal/maps_api/).
